<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script> 
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    </head>
<body>
    <script>
        async function cancel(IDPROPOSANT,IDANNONCE,RESPONSE,token){
            IDPROPOSANT = parseInt(IDPROPOSANT)
            IDANNONCE = parseInt(IDANNONCE)

            const data = {IDPROPOSANT, IDANNONCE, RESPONSE}

            try {
                const response = await axios.post('https://api.oumardev.com/apoloanapi/restopropose',data,{
                    headers: { Authorization: `Bear ${token}` }
                })
                window.location.replace("/");
                
            } catch (error) {
                
            }
        
        }
    </script>
    <%- include('script'); -%>
    <%- include('contrat'); -%>
    <p style="color:red;font-size:20px;font-weight: 500;" id="error"></p>
    <input type="button" id="create_pdf" value="Valider">  
    <input type="button" id="cancel" value="Annuler le contrat" onclick="cancel(`<%= proposant.id %>`,`<%= annonce.id %>`,'rejeter',`<%= token %>`);">
</body>
</html>